<ui:component xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:p="http://primefaces.org/ui"
	xmlns:wex="http://java.sun.com/jsf/composite/wex-cc"	
   	xmlns:composite="http://java.sun.com/jsf/composite">
   	
	<composite:interface>
		<composite:attribute name="edition" default="false" />
		<composite:attribute name="docFile" type="w.expenses8.data.domain.model.DocumentFile" />
		<composite:attribute name="extra" type="w.expenses8.data.core.model.DBable" />
		<composite:attribute name="handleSelect" method-signature="java.lang.Object unselect(org.primefaces.event.SelectEvent)" default="#{serviceController.handleSelect}"/>
		<composite:attribute name="handleUnselect" method-signature="java.lang.Object unselect(org.primefaces.event.UnselectEvent)" default="#{serviceController.handleUnselect}" />
		<composite:attribute name="update" />
	</composite:interface>
	
	<composite:implementation>
		<h:panelGroup rendered="#{not cc.attrs.edition}">
			<div style="width:100%;display:flex;justify-content:space-between" >
	        	<span style="min-width:150px; width:150px">
			       	<h:outputText value="#{cc.attrs.docFile.documentDate}" styleClass="wex-field-value">
						<f:convertDateTime type="localDate" pattern="dd/MM/yyyy" />
					</h:outputText>
				 </span>
				 
				<span style="width:100%">
			   		<h:outputText value="#{cc.attrs.docFile.fileName}" styleClass="wex-field-value" />
				</span>
				
				<p:button href="#{serviceController.getDocumentFileUrl(cc.attrs.docFile)}" icon="pi pi-search" target="_blank"/>
		   	</div>
		</h:panelGroup>
		
		<h:panelGroup rendered="#{cc.attrs.edition}">
			<p:tabView orientation="left" styleClass="wex-documentFile-selector">
				<p:tab >
					<div style="width:100%;display:flex;justify-content:space-between" >
			        	<span style="min-width:150px; width:150px">
								<p:datePicker id="documentDateId" value="#{cc.attrs.docFile.documentDate}" styleClass="wex-small-datepicker"
									pattern="dd/MM/yyyy"
									showIcon="true"
									showButtonBar="true"
									appendTo="@(body)">
							 		<p:ajax event="dateSelect" listener="#{serviceController.onDocumentFileDateChange(cc.attrs.docFile, cc.attrs.extra)}" update="@(.js-docdate-related)"  />
							 	</p:datePicker>
						 </span>
				 
					   		<p:inputText id="fileNameId" value="#{cc.attrs.docFile.fileName}" styleClass="wex-field-edit js-docdate-related"/>
			     		
				   		<p:button href="#{serviceController.getDocumentFileUrl(cc.attrs.docFile)}" icon="pi pi-search" target="_blank"/>
		   			</div>
		   		</p:tab>
		   		
		   		<p:tab >
					<div style="width:100%;display:flex;justify-content:space-between" >
						<span style="width:100%">
					   		<p:autoComplete value="#{cc.attrs.docFile}" styleClass="wex-field-edit js-docdate-related"
							 	dropdown="true" completeMethod="#{dropboxController.completeDocumentFile}" converter="#{documentFileConverter}" 
				             	var="doc" itemLabel="#{doc.fileName}" itemValue="#{doc}" forceSelection="true" placeholder="document" valueChangeListener="#{serviceController.valueChangeMethod}"> 
				            </p:autoComplete>
						</span>
			     		
				   		<p:button href="#{serviceController.getDocumentFileUrl(cc.attrs.docFile)}" icon="pi pi-search" target="_blank"/>
		   			</div>
		   		</p:tab>
		   	</p:tabView>
		</h:panelGroup>		
   	</composite:implementation>
</ui:component>